# API по управлению заявками

Это апи - тестовое задание в одной компании. Нужно с помощью апи принимать заявки от пользователей. Ответственное лицо должно обрабатывать эти заявки. При этом оставлять заявки могут все.  

## EndPointы

```
Post .../requests/
```
Post запрос /resquests/ - создание заявки. 

Пример тела запроса

```
{
    "name": "ivan",
    "email": "example@gmail.com",
    "message": "Текст заявки"
}
```
---
```
Put .../requests/{id}
```
Put запрос /resquests/{id} - ответ ответственным лицом на заявку. Где {id} - id заявки. При этом доступ имеет только ответственное лицо. 

Пример тела запроса

```
{
    "comment": "Текст ответа отв. лица.",
}
```
---
```
Get .../requests/
```
Get запрос /resquests/ - получение всех заявок. При этом доступ имеет только ответственное лицо. 

## Отвественные лица

По скольку не все endpointы должны быть доступны кому угодно, были добавленны авторизация и регистрация.

Авторизация
```
Post .../validator/login

{
  "email": "example@gmail.com",
  "password": "password"
}
```
Ответом сервера является token, с помощью которого производится доступ к заявкам.


Регистрация
```
Post .../validator/registration

{
  "email": "example@gmail.com",
  "password": "password"
}
```
Ответом сервера является token, с помощью которого производится доступ к заявкам.

## Технологии

1) TypeScrypt - основной язык программирования
2) Nest JS - основной фреймворк, на котором реализована работа с сетью
3) JWT - работа с токенами
4) Bcrypt - шифрование пароля
5) Sequelize - ORM для работы с базой данных
6) postgres - СУБД
7) mailer - фреймворк для отправки email сообщений


## Настройка и запуск

В .env файле нужно заполнить переменные окружения.
```
dbPort - порт базы данных
dbHost - хост бд
dbUser - пользователь бд
dbPassword - пароль пользователя бд
dbName - название бд
serverPort - порт сервера
mailHost - хост для отправки email
mailUser - логин для отправки emailов
mailPassword - пароль
mailFrom - от кого будут отправлять сообщения
secretKeyJWT - секретная фраза для токенов
```